# Introduction

The repository is Robot Management Tool library.
The library provides the communication way between server and agent.

Here are some related repository:

* Server side: https://github.com/Adlink-ROS/rmt_web_devkit
* Agent side: https://github.com/Adlink-ROS/RMT_example
* Documentation: https://github.com/Adlink-ROS/RMT-User-Manual

# Official Release Flow (Internal Use)

When we want to update the Robot Management Tool, we should follow the steps here:

1. Add tag in RMT repo and it'll create deb binary to release page on GitHub automatically.
2. Copy the deb binary to rmt_web_devkit and RMT_example. After some modification, add tag to them.
3. Copy the deb library and doxygen result to RMT-User-Manual.
4. Update the documentation on RMT-User-Manual.

# Install necessary packages

```bash
sudo apt install -y libcunit1-dev swig doxygen
# Used by CycloneDDS
sudo apt install bison
# Used by agent example
sudo apt install libnm-dev
```

# Build

```bash
cd $HOME
git clone https://github.com/Adlink-ROS/RMT.git
cd ~/RMT
# If you don't want to build agent with ROS, run "cmake -Bbuild -H. -DUSE_ROS=off" instead
cmake -Bbuild -H.
cmake --build build
# If you want to build deb file, run the command and find deb file in build folder
cmake --build build --target package
```

# Run

* Run example

```bash
# 1st terminal: Run the agent
cd ~/RMT/build/examples/RMT_example/agent
./agent_example
# 2nd terminal: Run the server
cd ~/RMT/build/server
./server_example
```

* You can also assign id and interface

```bash
# 1st terminal: Run the agent
cd ~/RMT/build/examples/RMT_example/agent
./agent_example --id 6166 --net enp1s0
# 2nd terminal: Run the server
cd ~/RMT/build/server
./server_example --net enp1s0
```

* Run multiple agents

```bash
cd ~/RMT/build/examples/RMT_example/agent
# invoke 5 agents with device ID from 20 to 24
./multi_agents.py -n 5 -s 20
```

# Test

## CUnit:

```bash
cd ~/RMT/build
ctest
# verbose
ctest -V
```

## Python Wrapper Test:

* Run few agents before testing

```bash
cd ~/RMT/build/agent
./agent_example
```

* Start testing

```bash
cd ~/RMT/build/swig
python3 python_example.py
```
## API Documents

* C API docs are auto-generated at `~/RMT/build/docs`

* Python API docs are manually generated by using below instruction, and the output HTML files will be placed at `~/RMT/build/swig`:

```bash
cd ~/RMT
cmake --build build --target pydoc
```
